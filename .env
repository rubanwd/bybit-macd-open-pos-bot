# частота
SCAN_INTERVAL_MINUTES=10



# Торговое окно (время Киева, IANA TZ)
TRADING_WINDOW_TZ=Europe/Kyiv
TRADING_WINDOW_START=08:00
TRADING_WINDOW_END=20:00



# Периодический контроль PNL
CLOSE_ON_PNL_ENABLED=1
CLOSE_ON_PNL_THRESHOLD_PCT=5.0   # Закрывать при прибыли >= 5%
PNL_CHECK_INTERVAL_MINUTES=2     # Проверять каждые 3 минуты



# «Мягкое» закрытие: сперва лимит reduceOnly IOC, затем фолбэк в маркет
SOFT_CLOSE_ENABLED=1
SOFT_CLOSE_TICKS=1          # на сколько тиков отодвигать лимит от lastPrice
SOFT_CLOSE_FALLBACK_SEC=2   # пауза перед фолбэком (IOC сам отменит неисполненный остаток)




# Смягчённые RSI по умолчанию (можно опустить — в коде уже такие дефолты)
BULL_LONG_RSI_MAX_5M=75
BULL_LONG_RSI_MAX_15M=75
BULL_LONG_RSI_MAX_1H=75
BULL_SHORT_RSI_MIN_5M=80
BULL_SHORT_RSI_MIN_15M=80
BULL_SHORT_RSI_MIN_1H=80

BEAR_SHORT_RSI_MIN_5M=25
BEAR_SHORT_RSI_MIN_15M=25
BEAR_SHORT_RSI_MIN_1H=25
BEAR_LONG_RSI_MAX_5M=20
BEAR_LONG_RSI_MAX_15M=20
BEAR_LONG_RSI_MAX_1H=20




# Проверка наклонов MACD/Signal — под 10-минутный скан
MACD_SLOPE_LOOKBACK_5M=4     # 4 бара по 5м ≈ 20 минут (≈2 скана)
MACD_SLOPE_LOOKBACK_15M=2    # 2 бара по 15м ≈ 30 минут (≈3 скана)
MACD_SLOPE_LOOKBACK_1H=3     # 3 бара по 1ч ≈ 3 часа (устойчивее, меньше шума)
# Минимальный модуль наклона (0 => учитывать только знак)
MACD_MIN_SLOPE_5M=0.0
MACD_MIN_SLOPE_15M=0.0
MACD_MIN_SLOPE_1H=0.0
# Фильтр противоречий младших ТФ для итогового тренда
MACD_CONTRADICTION_FILTER=1




# Фильтр аномалий (включён)
ANOMALY_FILTER_ENABLED=1
ANOMALY_ABS_CHANGE_PCT=0.6
ANOMALY_RANGE_PCT=1.0
ANOMALY_MIN_TURNOVER_USDT=1000000




# ТФ и отсечка по ATR%
TIMEFRAMES=15M,1H,4H
SORT_TF=1H




REOPEN_COOLDOWN_HOURS=4

# Параллельность/префильтр
WORKERS=8
USE_TICKERS_PREFILTER=1
PREFILTER_MULTIPLIER=1
TOP_N=50
KLINES_LIMIT=200

# Индикаторы
MACD_FAST=12
MACD_SLOW=26
MACD_SIGNAL=9
RSI_PERIOD=14
ATR_PERIOD=14

# Ограничения API
PER_REQUEST_SLEEP_MS=250
MAX_RETRIES=3
RETRY_BACKOFF_SEC=2

# Bybit сеть
BYBIT_BASE_URL=https://api-demo.bybit.com   # demo
# BYBIT_BASE_URL=https://api.bybit.com      # mainnet

# Схема подписи: headers | params
BYBIT_SIGN_STYLE=params                     # для demo ставь params, для mainnet обычно headers
BYBIT_ACCOUNT_TYPE=UNIFIED     # для demo чаще UNIFIED
# Режим позиции
POSITION_MODE=one_way                       # или hedge

BYBIT_CATEGORY=linear
BYBIT_API_KEY=VvwXs467cucCLI0YXb
BYBIT_API_SECRET=IYVTbFGLjAbT2IZGtRUDjCjgPKI2laVJgBnm
BYBIT_RECV_WINDOW=60000

# Торговля
ENABLE_TRADING=1
ORDER_VALUE_PCT=0.2
MAX_ORDER_NOTIONAL_USDT=100
LEVERAGE=10
MAX_OPEN_POSITIONS=5
ATR_TF_FOR_SLTP=1H
TP_ATR_MULT=1.5
SL_ATR_MULT=1.5

# Telegram (отчёты сканера)
TELEGRAM_BOT_TOKEN=8078967961:AAFmP-mZl0MOk1q_koWkN6tkHyLf9n5GL_M
TELEGRAM_CHAT_ID=-1002986979555

# Telegram (уведомления о сделках) — отдельный бот и чат
TELEGRAM_TRADES_BOT_TOKEN=8459332678:AAGpENsJbptoSp6TsOfYYmFymjxF0sXBJPU
TELEGRAM_TRADES_CHAT_ID=-1002708087467
